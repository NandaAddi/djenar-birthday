<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Ulang Tahun - Djenar Nandhita Kulawaku</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Pacifico&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Confetti JS -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'baby-blue': '#D4F1F4',
                        'baby-pink': '#FAD2E1',
                        'soft-yellow': '#FFF5BA',
                        'primary': '#75E6DA',
                        'accent': '#189AB4'
                    },
                    fontFamily: {
                        'cute': ['Fredoka', 'sans-serif'],
                        'script': ['Pacifico', 'cursive'],
                        'body': ['Nunito', 'sans-serif']
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'bounce-slow': 'bounce 2s infinite',
                        'spin-slow': 'spin 8s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-15px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar Hide */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        /* Cloud Decoration */
        .cloud {
            background: white;
            border-radius: 50%;
            position: absolute;
            opacity: 0.8;
            z-index: 0;
        }
        
        .music-btn.playing {
            animation: spin-slow 4s linear infinite;
        }

        /* Glassmorphism */
        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.5);
        }

        /* Helper untuk transisi cover */
        .slide-up {
            transform: translateY(-100vh);
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body class="font-body text-gray-700 bg-gradient-to-b from-baby-blue via-baby-pink to-soft-yellow min-h-screen overflow-hidden relative">

    <!-- Background Elements (Floating Objects) -->
    <div class="fixed inset-0 pointer-events-none z-0 overflow-hidden">
        <div class="cloud w-20 h-20 top-10 left-10 animate-float delay-100"></div>
        <div class="cloud w-32 h-32 top-40 right-10 animate-float delay-700 opacity-50"></div>
        <div class="absolute top-1/4 left-1/4 text-yellow-400 text-4xl animate-bounce-slow opacity-60"><i class="fas fa-star"></i></div>
        <div class="absolute bottom-1/3 right-1/4 text-pink-400 text-3xl animate-pulse opacity-60"><i class="fas fa-heart"></i></div>
        <div class="absolute top-10 right-1/2 text-blue-400 text-5xl animate-float opacity-40"><i class="fas fa-cloud"></i></div>
    </div>

    <!-- Music Control -->
    <button id="musicToggle" class="fixed top-4 right-4 z-50 bg-white/80 p-3 rounded-full shadow-lg border-2 border-primary hidden transition-all hover:scale-110">
        <i class="fas fa-music text-accent"></i>
    </button>
    <audio id="bgMusic" loop>
        <source src="https://djenar-birthday.vercel.app/hbd%20jeje.mp3">
        Your browser does not support the audio element.
    </audio>

    <!-- MAIN CONTAINER -->
    <main id="appContainer" class="relative z-10 w-full max-w-md mx-auto bg-white/30 h-screen shadow-2xl overflow-y-auto no-scrollbar scroll-smooth">
        
        <!-- === PAGE 1: COVER / ENVELOPE === -->
        <!-- Fixed position agar selalu menutupi layar awal dan bisa di-animasikan keluar -->
        <section id="cover" class="fixed inset-0 z-40 bg-gradient-to-b from-baby-blue via-baby-pink to-soft-yellow flex flex-col items-center justify-center text-center p-6 transition-all duration-1000 ease-in-out">
            <div class="glass-card p-8 rounded-3xl w-full max-w-sm animate-float">
                <div class="mb-4">
                    <span class="inline-block bg-pink-400 text-white px-4 py-1 rounded-full text-sm font-bold shadow-md">Undangan Ulang Tahun</span>
                </div>
                
                <div class="w-40 h-40 mx-auto rounded-full border-4 border-white shadow-xl overflow-hidden mb-4 relative bg-gray-200">
                    <!-- Placeholder Photo -->
                    <img src="157245.webp" alt="Baby Photo" class="w-full h-full object-cover">
                </div>

                <h1 class="font-script text-4xl text-accent mb-2">Djenar</h1>
                <p class="text-lg font-cute text-gray-600 mb-6">Is Turning 4!</p>

                <div class="border-t-2 border-dashed border-gray-400 my-4 w-1/2 mx-auto"></div>

                <p class="text-sm mb-2">Kepada Yth. Teman-temanku:</p>
                
                <!-- Dynamic Name Display -->
                <div id="guestNameDisplay" class="font-bold text-xl text-pink-500 mb-6 capitalize">
                    <!-- Name will be injected here via URL Parameter -->
                </div>

                <!-- Input Name Fallback REMOVED as requested -->

                <button onclick="openInvitation()" class="bg-gradient-to-r from-primary to-accent text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition hover:scale-105 active:scale-95 flex items-center justify-center gap-2 mx-auto w-full">
                    <i class="fas fa-envelope-open"></i> Buka Undangan
                </button>
            </div>
            
            <p class="absolute bottom-6 text-xs text-gray-500">Mohon maaf apabila ada kesalahan penulisan nama</p>
        </section>

        <!-- CONTENT WRAPPER (Hidden initially) -->
        <!-- Padding top besar untuk memberi ruang di awal scroll -->
        <div id="mainContent" class="hidden opacity-0 transition-opacity duration-1000">
            
            <!-- === PAGE 2: GREETING & PROFILE === -->
            <section class="min-h-screen flex flex-col items-center justify-center p-6 text-center pt-20">
                <div class="glass-card p-6 rounded-3xl w-full mb-6" data-aos="fade-up">
                    <h2 class="font-script text-3xl text-primary mb-4">Halo Teman-teman</h2>
                    <p class="text-gray-600 mb-4 font-cute">
                        datang ya teman-teman ayo hadir dan ikut merayakan momen spesial ulang tahun Djenar yang ke-4.
Kehadiran kalian akan menjadi kebahagiaan tersendiri bagi Djenar dan keluarga.
Yuk, datang dan rayakan bersama dengan penuh keceriaan, tawa, dan doa terbaik untuk Djenar ü§ç‚ú®
                    </p>
                    
                    <div class="relative w-48 h-48 mx-auto my-6">
                        <div class="absolute inset-0 bg-yellow-200 rounded-full animate-spin-slow opacity-50 blur-xl"></div>
                        <img src="157245.webp" class="relative w-full h-full object-cover rounded-full border-4 border-white shadow-xl z-10" alt="Main Photo">
                        <div class="absolute -bottom-2 -right-2 bg-white p-2 rounded-full shadow-md z-20">
                            <span class="text-2xl">üëë</span>
                        </div>
                    </div>

                    <h1 class="font-script text-4xl text-accent">Djenar Nandhita Kulawaku</h1>
                </div>

                <!-- Custom Message for Guest -->
                <div class="bg-white/80 p-4 rounded-xl shadow-sm w-full">
                    <p class="text-sm">Special invitation for:</p>
                    <h3 class="font-bold text-xl text-accent capitalize guest-name-target">Tamu Undangan</h3>
                </div>
            </section>

            <!-- === PAGE 3: EVENT DETAILS & MAP === -->
            <section class="min-h-screen flex flex-col items-center justify-center p-6 text-center">
                <h2 class="font-cute text-3xl text-pink-500 mb-8 font-bold flex items-center gap-2">
                    <i class="fas fa-calendar-alt"></i> Save The Date
                </h2>

                <div class="grid grid-cols-1 gap-6 w-full">
                    <!-- Date Card -->
                    <div class="bg-white rounded-2xl p-6 shadow-lg border-b-4 border-blue-300 transform hover:-translate-y-1 transition">
                        <i class="fas fa-calendar-day text-4xl text-blue-400 mb-2"></i>
                        <h3 class="font-bold text-xl text-gray-800">Sabtu</h3>
                        <p class="text-3xl font-bold text-accent my-2">31</p>
                        <p class="font-bold text-gray-600">Januari 2026</p>
                    </div>

                    <!-- Time Card -->
                    <div class="bg-white rounded-2xl p-6 shadow-lg border-b-4 border-pink-300 transform hover:-translate-y-1 transition">
                        <i class="fas fa-clock text-4xl text-pink-400 mb-2"></i>
                        <h3 class="font-bold text-xl text-gray-800">Pukul</h3>
                        <p class="text-2xl font-bold text-pink-500 mt-2">08.30 WIB - Selesai</p>
                    </div>

                    <!-- Location Card -->
                    <div class="bg-white rounded-2xl p-6 shadow-lg border-b-4 border-yellow-300">
                        <i class="fas fa-map-marker-alt text-4xl text-yellow-400 mb-2"></i>
                        <h3 class="font-bold text-xl text-gray-800 mb-2">Lokasi Acara</h3>
                        <p class="text-gray-600 mb-4 text-sm">Bimba AIUEO Sedap Malam<br>Jl. Sedapmalam No.16, Lowokwaru, Kec. Lowokwaru, Kota Malang, Jawa Timur 65141</p>
                        <a href="https://maps.app.goo.gl/BNeJ6RCFbXhHzZP98" target="_blank" class="inline-block bg-accent text-white px-6 py-2 rounded-full text-sm font-bold shadow-md hover:bg-blue-600 transition">
                            <i class="fas fa-location-arrow mr-1"></i> Lihat Google Maps
                        </a>
                    </div>
                </div>
            </section>

            <!-- === PAGE 4: WISHES & CLOSING === -->
            <section class="min-h-screen flex flex-col items-center justify-center p-6 pb-20 text-center">
                <h2 class="font-script text-3xl text-accent mb-6">Kirim Ucapan</h2>

                <div class="glass-card p-6 rounded-3xl w-full mb-8">
                    <form onsubmit="sendWish(event)" class="space-y-4 text-left">
                        <div>
                            <label class="block text-sm font-bold text-gray-600 mb-1">Nama</label>
                            <input type="text" id="senderName" class="w-full rounded-lg border-gray-300 p-2 text-sm focus:ring-2 focus:ring-pink-300 outline-none bg-white/80" readonly>
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-600 mb-1">Ucapan & Doa</label>
                            <textarea id="wishContent" rows="3" class="w-full rounded-lg border-gray-300 p-2 text-sm focus:ring-2 focus:ring-pink-300 outline-none bg-white/80" placeholder="Tulis ucapan manis disini..." required></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-bold text-gray-600 mb-1">Konfirmasi Kehadiran</label>
                            <select id="attendanceStatus" class="w-full rounded-lg border-gray-300 p-2 text-sm bg-white/80">
                                <option value="Hadir">Hadir</option>
                                <option value="Maaf, Tidak Bisa Hadir">Maaf, Tidak Bisa Hadir</option>
                                <option value="Masih Tentatif">Masih Tentatif</option>
                            </select>
                        </div>
                        <button type="submit" class="w-full bg-pink-400 text-white font-bold py-2 rounded-lg shadow-md hover:bg-pink-500 transition">
                            <i class="fas fa-paper-plane mr-2"></i> Kirim via WhatsApp
                        </button>
                    </form>
                </div>

                <div class="text-center mt-auto">
                    <p class="font-cute text-gray-600 mb-2">Terima kasih atas doa & kehadirannya</p>
                    <h2 class="font-script text-2xl text-primary">Djenar & Keluarga</h2>
                </div>
                
            </section>
        </div>
    </main>

    <script>
        // 1. Setup Elements
        const musicBtn = document.getElementById('musicToggle');
        const bgMusic = document.getElementById('bgMusic');
        const cover = document.getElementById('cover');
        const mainContent = document.getElementById('mainContent');
        const nameDisplay = document.getElementById('guestNameDisplay');
        // const nameInputWrapper removed
        // const nameInput removed
        const senderNameInput = document.getElementById('senderName');
        const targetNames = document.querySelectorAll('.guest-name-target');

        // 2. Logic URL Parameter
        const urlParams = new URLSearchParams(window.location.search);
        let guestName = urlParams.get('to');

        // Fungsi Init Nama
        function initGuestName() {
            if (guestName) {
                // Bersihkan inputan URL (misal %20 jadi spasi)
                guestName = decodeURIComponent(guestName);
            } else {
                // Default jika tidak ada ?to= di URL
                guestName = "Tamu Undangan";
            }
            nameDisplay.innerText = guestName;
        }
        
        initGuestName();

        // 3. Fungsi Buka Undangan
        function openInvitation() {
            // Validasi Input dihapus karena sekarang full otomatis dari URL
            
            // Update semua display nama di halaman dalam
            targetNames.forEach(el => el.innerText = guestName);
            senderNameInput.value = guestName;

            // Efek Transisi Cover: Slide Up & Fade Out
            cover.classList.add('slide-up');

            // Tampilkan Konten Utama
            mainContent.classList.remove('hidden');
            // Sedikit delay agar transisi opacity berjalan setelah hidden dilepas
            setTimeout(() => {
                mainContent.classList.remove('opacity-0');
            }, 50);

            // Play Music
            playMusic();
            musicBtn.classList.remove('hidden');

            // Trigger Confetti
            fireConfetti();

            // Opsional: Hapus cover dari DOM setelah animasi selesai agar tidak menutupi klik
            setTimeout(() => {
                cover.style.display = 'none';
            }, 1000);
        }

        // 4. Music Logic
        let isPlaying = false;

        function playMusic() {
            bgMusic.play().then(() => {
                isPlaying = true;
                musicBtn.classList.add('playing');
                musicBtn.innerHTML = '<i class="fas fa-compact-disc fa-spin"></i>';
            }).catch(e => {
                console.log("Audio autoplay blocked");
                // Fallback jika autoplay diblokir browser:
                // User harus klik tombol musik manual nantinya
            });
        }

        musicBtn.addEventListener('click', () => {
            if (isPlaying) {
                bgMusic.pause();
                musicBtn.classList.remove('playing');
                musicBtn.innerHTML = '<i class="fas fa-music"></i>'; 
            } else {
                bgMusic.play();
                musicBtn.classList.add('playing');
                musicBtn.innerHTML = '<i class="fas fa-compact-disc"></i>'; 
            }
            isPlaying = !isPlaying;
        });

        // 5. Confetti Effect
        function fireConfetti() {
            var duration = 3 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 50 };

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                var particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);
        }

// 6. Form Submission (Updated to WhatsApp)
function sendWish(e) {
    e.preventDefault(); // Mencegah reload halaman

    // 1. Ambil data dari form
    const sender = document.getElementById('senderName').value;
    const wish = document.getElementById('wishContent').value;
    const attendance = document.getElementById('attendanceStatus').value;

    // 2. Tentukan Nomor WhatsApp Tujuan (Ganti dengan nomor ortu/admin)
    // Format: Kode negara (62) diikuti nomor tanpa 0 di depan.
    // Contoh: 6281234567890
    const phoneNumber = "6289654151116"; 

    // 3. Buat Format Pesan
    const message = `*Undangan Ulang Tahun Djenar ke-4* üéÇ%0A%0A` +
                    `üë§ Nama: ${sender}%0A` +
                    `üíå Ucapan: ${wish}%0A` +
                    `‚úÖ Konfirmasi: ${attendance}%0A%0A` +
                    `Terima kasih!`;

    // 4. Deteksi apakah user pakai HP atau Desktop untuk membuka link yang sesuai
    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    
    let url;
    if (isMobile) {
        // Link untuk aplikasi mobile
        url = `whatsapp://send?phone=${phoneNumber}&text=${message}`;
    } else {
        // Link untuk browser desktop (WhatsApp Web)
        url = `https://web.whatsapp.com/send?phone=${phoneNumber}&text=${message}`;
    }

    // 5. Buka WhatsApp
    window.open(url, '_blank');
}
    </script>
</body>
</html>
